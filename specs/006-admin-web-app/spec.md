# Feature Specification: Next.js 관리 웹 애플리케이션

**Feature Branch**: `006-admin-web-app`
**Created**: 2025-11-02
**Status**: Draft
**Input**: User description: "Feature 6: Next.js 관리 웹 애플리케이션 - Python SCADA 백엔드를 제어하고 설정을 관리하는 Next.js 기반 관리 웹 애플리케이션을 완성합니다. shadcn/ui 컴포넌트를 사용하여 직관적인 UI를 제공합니다."

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 라인/공정/PLC/태그 관리 (Priority: P1)

관리자와 엔지니어가 웹 UI를 통해 SCADA 시스템의 기본 설정(라인, 공정, PLC, 태그)을 생성, 조회, 수정, 삭제할 수 있습니다. 특히 태그의 경우 CSV 파일 업로드를 통한 대량 등록이 가능합니다.

**Why this priority**: 라인/공정/PLC/태그 데이터는 전체 SCADA 시스템의 기반이 되는 마스터 데이터입니다. 폴링 제어나 모니터링을 하기 전에 반드시 이러한 기본 설정이 완료되어야 하므로 최우선 순위입니다. 이 기능만으로도 SQLite 데이터베이스의 데이터를 관리할 수 있는 최소 기능 제품(MVP)이 완성됩니다.

**Independent Test**: 관리자가 로그인 후 새로운 라인을 생성하고, 해당 라인에 공정을 추가하고, 공정에 PLC를 연결하고, CSV 파일로 태그 100개를 업로드한 후 웹 UI에서 모든 데이터가 정상적으로 조회되는지 확인합니다. 이 과정만으로 데이터 설정 기능의 가치를 독립적으로 검증할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 관리자가 라인 관리 페이지에 접속한 상태에서, **When** "새 라인 추가" 버튼을 클릭하고 라인명(예: "1호 생산라인")과 라인코드(예: "LINE001")를 입력한 후 저장하면, **Then** 라인 목록에 새로운 라인이 표시되고 SQLite 데이터베이스에 저장됩니다.

2. **Given** 라인이 1개 이상 등록된 상태에서, **When** 공정 관리 페이지에서 특정 라인을 선택하고 공정명(예: "절단 공정")과 공정코드(예: "PROC001")를 입력한 후 저장하면, **Then** 해당 라인에 공정이 추가되고 라인-공정 계층 구조가 UI에 표시됩니다.

3. **Given** 공정이 등록된 상태에서, **When** PLC 관리 페이지에서 PLC 이름, IP 주소(예: 192.168.1.100), 포트(예: 5000), PLC 타입(예: MC-3E)을 입력하고 "연결 테스트" 버튼을 클릭하면, **Then** 실제 PLC와 통신을 시도하고 연결 성공/실패 상태를 실시간으로 표시합니다.

4. **Given** PLC가 등록된 상태에서, **When** 태그 관리 페이지에서 "CSV 업로드" 기능을 사용하여 100개 태그 정보(태그명, 디바이스 주소, 데이터 타입 등)가 포함된 CSV 파일을 업로드하면, **Then** 모든 태그가 일괄 등록되고 태그 목록에 표시되며, 업로드 결과(성공 개수, 실패 개수, 오류 내역)를 요약하여 보여줍니다.

5. **Given** 태그 목록 페이지에 100개 이상의 태그가 등록된 상태에서, **When** 특정 태그명으로 검색하거나 PLC 이름으로 필터링하면, **Then** 조건에 맞는 태그만 필터링되어 표시되고 페이지네이션(예: 페이지당 20개)이 적용됩니다.

6. **Given** 태그 상세 페이지에서, **When** 태그의 디바이스 주소나 폴링 주기를 수정하고 저장하면, **Then** 변경 사항이 즉시 데이터베이스에 반영되고 수정 성공 메시지가 표시됩니다.

7. **Given** 사용 중인 PLC를 삭제하려고 할 때, **When** 해당 PLC에 연결된 태그가 존재하면, **Then** 경고 메시지(예: "이 PLC에 연결된 태그가 10개 있습니다. 삭제하시겠습니까?")를 표시하고 확인 후 삭제를 진행합니다.

---

### User Story 2 - 시스템 제어 및 폴링 그룹 관리 (Priority: P2)

운영자가 웹 UI를 통해 SCADA 시스템 전체를 시작/중지/재시작하고, 폴링 그룹을 생성하고, 태그를 그룹에 추가하고, 폴링 주기를 설정한 후 개별 폴링 그룹을 시작/중지/재시작할 수 있습니다.

**Why this priority**: 라인/공정/PLC/태그 데이터가 설정된 후에야 시스템을 시작하고 폴링 그룹을 구성하여 실제 데이터 수집을 시작할 수 있습니다. P1 기능(마스터 데이터 관리)이 완료되어야 의미가 있으므로 P2 우선순위입니다. 이 기능이 추가되면 실시간 데이터 수집을 웹에서 제어할 수 있는 완전한 운영 시스템이 됩니다.

**Independent Test**: 운영자가 대시보드에서 시스템 제어 패널을 통해 SCADA 시스템을 시작한 후, 폴링 그룹 관리 페이지에서 "온도 센서 그룹"이라는 폴링 그룹을 생성하고, 태그 5개를 추가하고, 폴링 주기를 1초로 설정한 후 "시작" 버튼을 클릭하면 백엔드 폴링 엔진이 해당 그룹의 데이터 수집을 시작하고, 시스템 상태 대시보드에서 "실행 중" 상태를 확인할 수 있습니다. 이 과정만으로 시스템 제어 및 폴링 제어 기능을 독립적으로 검증할 수 있습니다.

**Acceptance Scenarios**:

**시스템 제어**:

1. **Given** 백엔드 FastAPI 서버가 실행 중이고 SCADA 시스템이 중지된 상태에서, **When** 대시보드의 시스템 제어 패널에서 "시작(Start)" 버튼을 클릭하면, **Then** 백엔드가 폴링 엔진을 초기화하고, 시스템 상태가 "실행 중(Running)"으로 변경되며, 업타임(Uptime) 카운터가 표시됩니다.

2. **Given** SCADA 시스템이 실행 중인 상태에서, **When** "중지(Stop)" 버튼을 클릭하면, **Then** 모든 폴링 그룹이 중지되고, 시스템 상태가 "중지됨(Stopped)"으로 변경되며, 경고 메시지(예: "시스템이 중지되었습니다. PLC 설정 후 시작 버튼을 클릭하세요.")가 표시됩니다.

3. **Given** SCADA 시스템이 실행 중인 상태에서, **When** "재시작(Restart)" 버튼을 클릭하면, **Then** 시스템이 중지 후 재시작되고, 상태가 잠시 "재시작 중(Restarting)"으로 표시된 후 "실행 중(Running)"으로 변경됩니다.

4. **Given** 시스템 제어 패널이 표시된 상태에서, **When** 시스템 상태가 변경되면, **Then** 3초마다 백엔드 API를 호출하여 최신 상태(시스템 상태, 로드된 폴링 그룹 수, 실행 중인 폴링 그룹 수, 업타임)를 가져와 실시간으로 UI에 반영합니다.

5. **Given** SCADA 시스템이 중지된 상태에서, **When** 시스템 제어 패널을 확인하면, **Then** "시작" 버튼만 활성화되고, "중지" 및 "재시작" 버튼은 비활성화되며, 노란색 경고 메시지가 표시됩니다.

**폴링 그룹 관리**:

6. **Given** 태그가 10개 이상 등록된 상태에서, **When** 폴링 그룹 생성 페이지에서 그룹명(예: "압력 센서 그룹"), 폴링 주기(예: 2초), 활성화 여부를 입력하고 태그 5개를 선택한 후 저장하면, **Then** 폴링 그룹이 생성되고 그룹 목록에 표시됩니다.

7. **Given** 폴링 그룹이 "중지" 상태인 경우, **When** 폴링 그룹 목록에서 "시작" 버튼을 클릭하면, **Then** 백엔드 FastAPI 엔드포인트를 호출하고, 폴링 엔진이 해당 그룹의 데이터 수집을 시작하며, UI에 "실행 중" 상태로 변경됩니다.

8. **Given** 폴링 그룹이 "실행 중" 상태인 경우, **When** "중지" 버튼을 클릭하면, **Then** 백엔드가 폴링을 중지하고 UI에 "중지됨" 상태로 변경되며, 마지막 폴링 시간이 표시됩니다.

9. **Given** 폴링 그룹이 실행 중 오류가 발생한 상태("오류" 상태)에서, **When** "재시작" 버튼을 클릭하면, **Then** 백엔드가 폴링 그룹을 재시작하고 오류 카운트를 초기화하며, UI에 "실행 중" 상태로 변경됩니다.

10. **Given** 폴링 그룹 상세 페이지에서, **When** 폴링 주기를 2초에서 5초로 변경하고 저장하면, **Then** 백엔드 설정이 업데이트되고, 이미 실행 중인 그룹은 자동으로 재시작되어 새로운 주기가 적용됩니다.

11. **Given** 여러 폴링 그룹이 등록된 상태에서, **When** "모두 시작" 버튼을 클릭하면, **Then** 모든 중지된 폴링 그룹이 동시에 시작되고 각 그룹의 상태가 "실행 중"으로 변경됩니다.

---

### User Story 3 - 시스템 상태 모니터링 (Priority: P3)

관리자가 실시간 시스템 상태 대시보드를 통해 CPU 사용량, 메모리 사용량, PLC 연결 상태, 폴링 성능 지표를 모니터링할 수 있습니다.

**Why this priority**: 시스템이 정상적으로 운영되고 있는지 확인하는 모니터링 기능은 중요하지만, 기본 설정(P1)과 폴링 제어(P2)가 작동하지 않으면 모니터링할 대상이 없습니다. 따라서 P3 우선순위로 설정되며, 이 기능이 추가되면 시스템 운영 상태를 실시간으로 파악할 수 있어 운영 효율성이 향상됩니다.

**Independent Test**: 관리자가 대시보드 페이지에 접속하면 현재 CPU 사용량(예: 45%), 메모리 사용량(예: 2.1GB/4GB), 연결된 PLC 개수(예: 5/6), 활성 폴링 그룹 개수(예: 3/5)가 실시간으로 표시되고, 5초마다 자동으로 갱신됩니다. 이 과정만으로 모니터링 기능을 독립적으로 검증할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 시스템 상태 대시보드 페이지에 접속한 상태에서, **When** 페이지가 로드되면, **Then** 백엔드 엔드포인트를 호출하여 CPU 사용률, 메모리 사용량, 디스크 사용량을 가져와 대시보드 카드에 표시합니다.

2. **Given** PLC가 6대 등록되어 있고 그중 5대가 연결된 상태에서, **When** 대시보드를 확인하면, **Then** "PLC 연결 상태: 5/6 온라인" 정보가 표시되고, 오프라인 PLC 이름(예: "PLC-3")이 경고 아이콘과 함께 표시됩니다.

3. **Given** 폴링 그룹 5개 중 3개가 실행 중인 상태에서, **When** 대시보드를 확인하면, **Then** "활성 폴링 그룹: 3/5" 정보가 표시되고, 각 그룹의 마지막 폴링 시간과 성공률(예: 99.8%)이 표시됩니다.

4. **Given** 대시보드가 열려 있는 상태에서, **When** 5초가 경과하면, **Then** WebSocket 또는 HTTP 폴링을 통해 자동으로 데이터가 갱신되고 최신 시스템 상태가 반영됩니다.

5. **Given** 버퍼 오버플로우가 발생한 상태에서, **When** 대시보드의 "버퍼 상태" 섹션을 확인하면, **Then** 버퍼 사용률(예: 95%), 오버플로우 횟수(예: 3회), 마지막 오버플로우 시간이 빨간색 경고로 표시됩니다.

6. **Given** Oracle Writer의 쓰기 실패가 발생한 상태에서, **When** 대시보드의 "데이터베이스 상태" 섹션을 확인하면, **Then** 쓰기 성공률(예: 98.5%), 실패 횟수(예: 15회), 백업 파일 개수(예: 3개)가 표시됩니다.

---

### User Story 4 - 로그 조회 (Priority: P4)

엔지니어가 웹 UI를 통해 4개의 로그 파일(scada.log, error.log, communication.log, performance.log)을 조회하고, 시간 범위 필터링, 키워드 검색, 로그 레벨 필터링을 수행할 수 있습니다.

**Why this priority**: 로그 조회는 문제 발생 시 디버깅과 분석에 필수적이지만, 시스템이 정상 운영되고 있을 때는 자주 사용되지 않습니다. 따라서 P4 우선순위로 설정되며, 이 기능이 추가되면 원격에서 로그를 확인하고 문제를 신속하게 파악할 수 있습니다.

**Independent Test**: 엔지니어가 로그 조회 페이지에서 "communication.log"를 선택하고, "ERROR" 레벨 필터를 적용하고, "PLC-3" 키워드로 검색하면, 해당 조건에 맞는 로그 항목만 시간 역순으로 표시되고, 페이지당 50개씩 페이지네이션이 적용됩니다. 이 과정만으로 로그 조회 기능을 독립적으로 검증할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 로그 조회 페이지에 접속한 상태에서, **When** 로그 파일 선택 드롭다운에서 "error.log"를 선택하면, **Then** 백엔드 엔드포인트를 호출하여 최신 로그 100개를 가져와 시간 역순으로 표시합니다.

2. **Given** scada.log 파일이 선택된 상태에서, **When** 시간 범위 필터로 "최근 1시간"을 선택하면, **Then** 최근 1시간 이내의 로그만 필터링되어 표시됩니다.

3. **Given** communication.log 파일이 선택된 상태에서, **When** 키워드 검색창에 "timeout"을 입력하고 검색하면, **Then** "timeout" 문자열이 포함된 로그 항목만 하이라이트 처리되어 표시됩니다.

4. **Given** error.log 파일이 선택된 상태에서, **When** 로그 레벨 필터로 "ERROR"와 "CRITICAL"을 선택하면, **Then** 해당 레벨의 로그만 필터링되어 표시됩니다.

5. **Given** 로그 목록이 500개 이상인 상태에서, **When** 페이지 하단의 페이지네이션 버튼을 클릭하면, **Then** 다음 50개의 로그가 로드되어 표시됩니다.

6. **Given** 특정 로그 항목을 클릭하면, **When** 로그 상세 정보 모달이 열리면, **Then** 타임스탬프, 로그 레벨, 메시지, 스택 트레이스(있는 경우)가 상세하게 표시됩니다.

7. **Given** 로그 조회 페이지에서, **When** "다운로드" 버튼을 클릭하면, **Then** 현재 필터링된 로그를 CSV 파일로 다운로드합니다.

---

### Edge Cases

- **CSV 업로드 시 잘못된 형식**: 태그 CSV 파일의 컬럼이 누락되거나 데이터 타입이 잘못된 경우, 어떤 행에서 오류가 발생했는지 구체적인 오류 메시지(예: "5번째 행: 디바이스 주소 형식 오류")를 표시하고, 정상 데이터만 부분 업로드할지 전체 롤백할지 선택할 수 있습니다.

- **PLC 연결 실패**: PLC 연결 테스트 시 타임아웃, 네트워크 오류, 인증 실패 등 다양한 오류 유형에 대해 구체적인 오류 메시지를 제공하고, 재시도 옵션을 제공합니다.

- **폴링 그룹 시작 실패**: 폴링 그룹에 포함된 태그의 PLC가 오프라인인 경우, 경고 메시지(예: "PLC-3이 오프라인 상태입니다. 계속 진행하시겠습니까?")를 표시하고, 사용자 확인 후 부분적으로 폴링을 시작합니다.

- **동시 편집 충돌**: 두 명의 사용자가 동일한 PLC 설정을 동시에 수정하는 경우, 나중에 저장한 사용자에게 경고 메시지(예: "다른 사용자가 이미 수정했습니다. 덮어쓰시겠습니까?")를 표시합니다.

- **대용량 로그 파일**: 로그 파일이 수백 MB인 경우, 전체 파일을 읽지 않고 백엔드에서 페이지네이션과 스트리밍을 사용하여 성능 저하 없이 조회할 수 있습니다.

- **백엔드 API 연결 실패**: 백엔드 FastAPI 서버가 다운된 경우, 프론트엔드에서 "서버에 연결할 수 없습니다. 잠시 후 다시 시도해주세요."라는 명확한 메시지를 표시하고, 자동 재연결을 시도합니다.

- **세션 만료**: 사용자가 장시간 작업 없이 페이지를 열어둔 경우, 세션이 만료되면 자동으로 로그인 페이지로 리다이렉트되거나 세션 갱신 프롬프트를 표시합니다.

- **모바일 반응형**: 모바일 기기에서 접속 시 테이블 형식 데이터(태그 목록, 로그 목록)를 카드 형식으로 변환하여 표시하고, 터치 제스처(스와이프, 탭)를 지원합니다.

## Requirements *(mandatory)*

### Functional Requirements

#### 라인/공정 관리

- **FR-001**: 시스템은 라인(Line) 생성, 조회, 수정, 삭제(CRUD) 기능을 제공해야 합니다.
- **FR-002**: 시스템은 공정(Process) 생성, 조회, 수정, 삭제(CRUD) 기능을 제공하며, 공정은 특정 라인에 종속되어야 합니다.
- **FR-003**: 라인과 공정의 계층 구조(라인 → 공정)를 트리 형태 또는 계층형 목록으로 UI에 표시해야 합니다.

#### PLC 관리

- **FR-004**: 시스템은 PLC 연결 정보(이름, IP 주소, 포트, PLC 타입, 프로토콜) 생성, 조회, 수정, 삭제(CRUD) 기능을 제공해야 합니다.
- **FR-005**: PLC 관리 페이지에서 "연결 테스트" 버튼을 클릭하면 백엔드 API를 호출하여 실제 PLC와 통신을 시도하고 연결 성공/실패 결과를 실시간으로 표시해야 합니다.
- **FR-006**: PLC가 다른 엔티티(태그)에서 참조되고 있는 경우 삭제 시 경고 메시지를 표시하고, 사용자 확인 후 삭제를 진행해야 합니다.

#### 태그 관리

- **FR-007**: 시스템은 태그(Tag) 생성, 조회, 수정, 삭제(CRUD) 기능을 제공해야 합니다.
- **FR-008**: 태그는 특정 PLC에 연결되어야 하며, 태그명, 디바이스 주소, 데이터 타입, 폴링 주기, 설명 등의 속성을 포함해야 합니다.
- **FR-009**: 시스템은 CSV 파일 업로드를 통한 태그 일괄 등록 기능을 제공해야 합니다.
- **FR-010**: CSV 업로드 시 데이터 유효성 검사를 수행하고, 오류가 발생한 행과 구체적인 오류 메시지를 사용자에게 표시해야 합니다.
- **FR-011**: 태그 목록은 태그명, PLC 이름, 라인, 공정 등으로 검색 및 필터링이 가능해야 합니다.
- **FR-012**: 태그 목록이 100개 이상인 경우 페이지네이션(기본 20개/페이지)을 적용해야 합니다.

#### 시스템 제어

- **FR-013**: 시스템은 SCADA 시스템 전체를 시작(Start), 중지(Stop), 재시작(Restart)하는 제어 버튼을 제공해야 합니다.
- **FR-014**: 백엔드 FastAPI 서버가 시작될 때 SCADA 폴링 엔진은 자동으로 시작되지 않아야 하며, 사용자가 명시적으로 시작 버튼을 클릭해야만 초기화되고 실행되어야 합니다.
- **FR-015**: 시스템 제어 패널은 현재 시스템 상태(Running/Stopped/Starting/Stopping/Error/Unavailable)를 색상별 배지로 표시해야 합니다.
- **FR-016**: 시스템이 실행 중일 때 업타임(Uptime)을 시:분:초 형식으로 표시해야 합니다.
- **FR-017**: 시스템 제어 패널은 로드된 폴링 그룹 수와 실행 중인 폴링 그룹 수를 표시해야 합니다.
- **FR-018**: 시스템 제어 패널의 상태는 3초마다 자동으로 갱신되어야 합니다.
- **FR-019**: 시스템이 중지된 상태에서는 노란색 경고 메시지를 표시하여 사용자에게 PLC 설정 후 시작하도록 안내해야 합니다.
- **FR-020**: 시스템 상태에 따라 버튼의 활성화/비활성화가 적절하게 제어되어야 합니다 (예: 실행 중일 때 시작 버튼 비활성화).

#### 폴링 그룹 설정

- **FR-021**: 시스템은 폴링 그룹(Polling Group) 생성, 조회, 수정, 삭제(CRUD) 기능을 제공해야 합니다.
- **FR-022**: 폴링 그룹은 그룹명, 폴링 주기(초 단위), 활성화 여부, 포함된 태그 목록을 속성으로 가져야 합니다.
- **FR-023**: 폴링 그룹 생성/수정 시 등록된 태그 목록에서 다중 선택하여 그룹에 추가할 수 있어야 합니다.
- **FR-024**: 폴링 그룹의 폴링 주기는 0.5초~60초 범위로 제한되며, 범위 외 값 입력 시 유효성 검사 오류를 표시해야 합니다.

#### 폴링 그룹 제어

- **FR-025**: 시스템은 특정 폴링 그룹을 시작(Start), 중지(Stop), 재시작(Restart)하는 제어 버튼을 제공해야 합니다.
- **FR-026**: 폴링 제어 버튼 클릭 시 백엔드 FastAPI 엔드포인트를 호출해야 합니다.
- **FR-027**: 폴링 제어 명령 실행 후 백엔드 응답(성공/실패)을 받아 UI에 즉시 반영하고, 성공/실패 토스트 메시지를 표시해야 합니다.
- **FR-028**: 폴링 그룹 목록 페이지에서 "모두 시작" 및 "모두 중지" 버튼을 제공하여 여러 그룹을 일괄 제어할 수 있어야 합니다.

#### 시스템 상태 모니터링

- **FR-029**: 시스템 상태 대시보드는 CPU 사용률, 메모리 사용량, 디스크 사용량을 실시간으로 표시해야 합니다.
- **FR-030**: 대시보드는 PLC 연결 상태(온라인/오프라인 개수 및 목록)를 표시해야 합니다.
- **FR-031**: 대시보드는 활성 폴링 그룹 개수, 각 그룹의 마지막 폴링 시간, 폴링 성공률을 표시해야 합니다.
- **FR-032**: 대시보드는 버퍼 사용률, 오버플로우 횟수, Oracle Writer 쓰기 성공률, 백업 파일 개수를 표시해야 합니다.
- **FR-033**: 대시보드 데이터는 5초마다 자동으로 갱신되어야 하며, WebSocket 또는 HTTP 폴링 방식을 사용합니다.
- **FR-034**: 시스템 상태에서 임계값(예: CPU 사용률 90% 이상, 버퍼 사용률 95% 이상)을 초과하면 경고 아이콘 및 빨간색으로 표시해야 합니다.

#### 로그 조회

- **FR-035**: 시스템은 4개의 로그 파일(scada.log, error.log, communication.log, performance.log) 조회 기능을 제공해야 합니다.
- **FR-036**: 로그 조회 페이지에서 로그 파일을 선택하면 백엔드 API를 호출하여 로그 내용을 가져와야 합니다.
- **FR-037**: 로그는 시간 역순(최신 로그가 위)으로 표시되며, 타임스탬프, 로그 레벨, 메시지를 포함해야 합니다.
- **FR-038**: 로그 조회 시 시간 범위 필터(최근 1시간, 최근 24시간, 최근 7일, 사용자 지정)를 적용할 수 있어야 합니다.
- **FR-039**: 로그 조회 시 키워드 검색 기능을 제공하며, 검색된 키워드는 하이라이트 처리되어야 합니다.
- **FR-040**: 로그 조회 시 로그 레벨 필터(DEBUG, INFO, WARNING, ERROR, CRITICAL)를 다중 선택하여 적용할 수 있어야 합니다.
- **FR-041**: 로그 목록이 100개 이상인 경우 페이지네이션(기본 50개/페이지)을 적용해야 합니다.
- **FR-042**: 로그 조회 결과를 CSV 파일로 다운로드할 수 있어야 합니다.

#### UI/UX

- **FR-043**: 모든 페이지는 shadcn/ui 컴포넌트 라이브러리를 사용하여 일관된 디자인을 제공해야 합니다.
- **FR-044**: 시스템은 반응형 디자인을 적용하여 모바일(320px~767px), 태블릿(768px~1023px), 데스크톱(1024px 이상) 환경에서 정상적으로 표시되어야 합니다.
- **FR-045**: 모든 CRUD 작업(생성, 수정, 삭제) 완료 시 사용자에게 성공/실패 피드백을 토스트 메시지 또는 알림으로 제공해야 합니다.
- **FR-046**: 삭제 작업 시 사용자에게 확인 모달(예: "정말 삭제하시겠습니까?")을 표시하여 실수로 인한 삭제를 방지해야 합니다.
- **FR-047**: 백엔드 API 요청 중 로딩 상태(스피너, 프로그레스 바)를 표시하여 사용자에게 진행 상황을 알려야 합니다.

#### 데이터 연동

- **FR-048**: 모든 데이터는 FastAPI 백엔드 API(http://localhost:8000)와 HTTP REST 통신을 통해 조회 및 저장되어야 합니다.
- **FR-049**: 백엔드 API 호출 실패 시(타임아웃, 네트워크 오류, 5xx 에러) 명확한 오류 메시지를 사용자에게 표시하고 재시도 옵션을 제공해야 합니다.
- **FR-050**: 시스템은 SQLite 데이터베이스(backend/config/scada.db)의 기존 테이블(lines, processes, plc_connections, tags, polling_groups, polling_group_tags)을 활용해야 합니다.

### Key Entities

- **Line (라인)**: 생산 라인을 나타내며, 라인명, 라인코드, 생성일자 등의 속성을 가집니다. 여러 공정을 포함할 수 있습니다.

- **Process (공정)**: 특정 라인에 속한 공정을 나타내며, 공정명, 공정코드, 라인 참조 등의 속성을 가집니다. 여러 PLC를 포함할 수 있습니다.

- **PLC (PLC 장비)**: 실제 PLC 장비의 연결 정보를 나타내며, PLC 이름, IP 주소, 포트 번호, PLC 타입(MC-3E), 프로토콜(ASCII/Binary), 연결 상태 등의 속성을 가집니다. 여러 태그를 포함할 수 있습니다.

- **Tag (태그)**: PLC에서 읽어올 데이터 포인트를 나타내며, 태그명, 디바이스 주소(예: D100), 데이터 타입(INT, FLOAT, BOOL 등), 폴링 주기, 단위, 설명, PLC 참조 등의 속성을 가집니다.

- **Polling Group (폴링 그룹)**: 함께 폴링할 태그들의 그룹을 나타내며, 그룹명, 폴링 주기(초), 활성화 여부, 마지막 폴링 시간, 상태(중지/실행 중/오류) 등의 속성을 가집니다. 여러 태그를 포함합니다.

- **System Status (시스템 상태)**: 현재 시스템의 실시간 상태 정보를 나타내며, CPU 사용률, 메모리 사용량, 디스크 사용량, PLC 연결 상태, 버퍼 사용률, Oracle Writer 상태 등의 속성을 가집니다. (백엔드 API에서 실시간 생성되는 가상 엔티티)

- **Log Entry (로그 항목)**: 시스템 로그 파일의 개별 로그 항목을 나타내며, 타임스탬프, 로그 레벨(DEBUG/INFO/WARNING/ERROR/CRITICAL), 로그 메시지, 로그 파일 타입(scada/error/communication/performance) 등의 속성을 가집니다.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 관리자가 새로운 라인을 생성하고 해당 라인에 공정, PLC, 태그를 추가하는 전체 설정 작업을 5분 이내에 완료할 수 있습니다.

- **SC-002**: 태그 CSV 파일 업로드를 통해 100개의 태그를 수동 입력 대비 10배 빠르게(1분 이내) 일괄 등록할 수 있습니다.

- **SC-003**: 폴링 그룹 시작/중지 제어 명령이 클릭 후 2초 이내에 백엔드에 전달되고 UI에 상태 변경이 반영됩니다.

- **SC-004**: 시스템 상태 대시보드가 5초마다 자동으로 갱신되어 실시간 모니터링이 가능하며, 데이터 갱신 시 화면 깜빡임이나 레이아웃 변경이 없습니다.

- **SC-005**: 로그 조회 시 10,000개 이상의 로그가 있어도 페이지네이션과 필터링을 통해 1초 이내에 원하는 로그를 찾을 수 있습니다.

- **SC-006**: 모든 CRUD 작업(생성, 수정, 삭제)의 90% 이상이 사용자의 첫 시도에 성공하며, 명확한 성공/실패 피드백을 제공합니다.

- **SC-007**: 백엔드 API 연결 실패 시 3초 이내에 사용자에게 오류 메시지가 표시되고, 재시도 옵션을 제공합니다.

- **SC-008**: 모바일 기기(375px 이상)에서 접속 시 모든 기능이 터치 인터페이스를 통해 정상적으로 작동하며, 텍스트와 버튼이 가독성 있게 표시됩니다.

- **SC-009**: PLC 연결 테스트 실행 시 10초 이내에 연결 성공/실패 결과를 표시하고, 실패 시 구체적인 오류 원인(타임아웃, 네트워크 오류, 인증 실패 등)을 제공합니다.

- **SC-010**: 시스템은 동시 사용자 10명이 각각 다른 페이지(라인 관리, 태그 관리, 대시보드 등)에서 작업하더라도 성능 저하 없이 정상적으로 작동합니다.

## Assumptions and Constraints

### Assumptions

- 백엔드 FastAPI 서버는 이미 구축되어 있으며, CRUD 엔드포인트를 제공한다고 가정합니다.
- SQLite 데이터베이스(backend/config/scada.db)에는 Feature 1~5에서 생성된 테이블이 이미 존재한다고 가정합니다.
- shadcn/ui 컴포넌트 라이브러리는 Next.js 프로젝트(apps/admin/)에 이미 설치되어 있거나, 쉽게 설치 가능하다고 가정합니다.
- 사용자는 웹 브라우저(Chrome, Firefox, Edge, Safari 최신 버전)를 통해 접속하며, 특별한 인증 없이 관리 페이지에 접근할 수 있다고 가정합니다.
- 로그 파일은 백엔드 서버의 특정 디렉토리(예: backend/logs/)에 저장되어 있으며, 백엔드 API를 통해 접근 가능하다고 가정합니다.

### Constraints

- Next.js 14.2.33 버전 및 App Router 구조를 사용해야 하며, apps/admin/ 디렉토리에 모든 프론트엔드 코드가 위치해야 합니다.
- TypeScript를 사용하여 타입 안전성을 보장해야 합니다.
- shadcn/ui 컴포넌트를 사용하여 일관된 UI/UX를 제공해야 하며, 커스텀 CSS 사용을 최소화해야 합니다.
- 백엔드 API는 http://localhost:8000 주소를 사용하며, CORS 설정이 올바르게 구성되어 있어야 합니다.
- 실시간 데이터 갱신은 WebSocket 또는 HTTP 폴링 방식 중 하나를 선택하여 구현해야 합니다.
- 모든 데이터 변경 작업은 백엔드 API를 통해 이루어져야 하며, 프론트엔드에서 직접 SQLite 데이터베이스에 접근하지 않습니다.
- CSV 파일 업로드 시 파일 크기는 5MB 이하로 제한하며, 이를 초과하면 오류 메시지를 표시합니다.
- 페이지네이션은 서버 사이드 페이지네이션 방식을 사용하여 대용량 데이터 처리 시 성능을 보장해야 합니다.
- 반응형 디자인은 Tailwind CSS의 반응형 유틸리티 클래스를 활용하여 구현해야 합니다.
